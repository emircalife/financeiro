<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- This fragment, when loaded, will trigger the loading of the receitas-list -->
    <div id="despesas-list" th:fragment="despesas-list" class="card mb-4"
         hx-get="/home/receitas"
         hx-trigger="load"
         hx-target="#receitas-list"
         hx-swap="outerHTML"
         hx-include="#filter-form">
        <div class="card-header">
            Lançamentos de Despesa
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Categoria</th>
                            <th>Descrição</th>
                            <th>DT Vencimento</th>
                            <th>R$ a Pagar</th>
                            <th>DT Pagamento</th>
                            <th>R$ Pago</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="lancamento : ${lancamentosDespesa?.content}">
                            <td th:text="${lancamento.id}"></td>
                            <td th:text="${lancamento.categoriasDespesa.descricao}"></td>
                            <td th:text="${lancamento.descricao}"></td>
                            <td th:text="${#temporals.format(lancamento.dataVencimento, 'dd/MM/yyyy')}"></td>
                            <td th:text="${#numbers.formatCurrency(lancamento.valorAPagar)}"></td>
                            <td th:text="${#temporals.format(lancamento.dataPagamento, 'dd/MM/yyyy')}"></td>
                            <td th:text="${#numbers.formatCurrency(lancamento.valorPago)}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item" th:classappend="${lancamentosDespesa?.first} ? 'disabled' : ''">
                        <a class="page-link" th:hx-get="@{/home/despesas(mesAno=${mesAnoAtual}, page=${lancamentosDespesa.number - 1})}" hx-target="#despesas-list" hx-swap="outerHTML">Anterior</a>
                    </li>
                    <li class="page-item" th:each="i : ${lancamentosDespesa?.totalPages > 0 ? #numbers.sequence(0, lancamentosDespesa.totalPages - 1) : {}}" th:classappend="${i == lancamentosDespesa.number} ? 'active' : ''">
                        <a class="page-link" th:hx-get="@{/home/despesas(mesAno=${mesAnoAtual}, page=${i})}" hx-target="#despesas-list" hx-swap="outerHTML" th:text="${i + 1}"></a>
                    </li>
                    <li class="page-item" th:classappend="${lancamentosDespesa?.last} ? 'disabled' : ''">
                        <a class="page-link" th:hx-get="@{/home/despesas(mesAno=${mesAnoAtual}, page=${lancamentosDespesa.number + 1})}" hx-target="#despesas-list" hx-swap="outerHTML">Próximo</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</body>
</html>
