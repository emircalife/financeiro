<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- This fragment is now just a content block, without the wrapper ID -->
    <div th:fragment="lists-content">
        <!-- Expense Table Card -->
        <div class="card mb-4">
            <div class="card-header">Lançamentos de Despesa</div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover table-sm">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Categoria</th>
                                <th>Descrição</th>
                                <th>DT Vencimento</th>
                                <th>R$ a Pagar</th>
                                <th>DT Pagamento</th>
                                <th>R$ Pago</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="lancamento : ${lancamentosDespesa?.content}">
                                <td th:text="${lancamento.id}"></td>
                                <td th:text="${lancamento.categoriasDespesa.descricao}"></td>
                                <td th:text="${lancamento.descricao}"></td>
                                <td th:text="${#temporals.format(lancamento.dataVencimento, 'dd/MM/yyyy')}"></td>
                                <td th:text="${#numbers.formatCurrency(lancamento.valorAPagar)}"></td>
                                <td th:text="${#temporals.format(lancamento.dataPagamento, 'dd/MM/yyyy')}"></td>
                                <td th:text="${#numbers.formatCurrency(lancamento.valorPago)}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item" th:classappend="${lancamentosDespesa?.first} ? 'disabled' : ''">
                            <a class="page-link" th:attr="hx-get=@{/home/lists(mesAno=${mesAnoAtual}, despesasPage=${lancamentosDespesa.number - 1}, receitasPage=${lancamentosReceita.number})}" hx-target="#lists-wrapper" hx-swap="innerHTML">Anterior</a>
                        </li>
                        <li class="page-item" th:each="i : ${lancamentosDespesa?.totalPages > 0 ? #numbers.sequence(0, lancamentosDespesa.totalPages - 1) : {}}" th:classappend="${i == lancamentosDespesa.number} ? 'active' : ''">
                            <a class="page-link" th:attr="hx-get=@{/home/lists(mesAno=${mesAnoAtual}, despesasPage=${i}, receitasPage=${lancamentosReceita.number})}" hx-target="#lists-wrapper" hx-swap="innerHTML" th:text="${i + 1}"></a>
                        </li>
                        <li class="page-item" th:classappend="${lancamentosDespesa?.last} ? 'disabled' : ''">
                            <a class="page-link" th:attr="hx-get=@{/home/lists(mesAno=${mesAnoAtual}, despesasPage=${lancamentosDespesa.number + 1}, receitasPage=${lancamentosReceita.number})}" hx-target="#lists-wrapper" hx-swap="innerHTML">Próximo</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        <!-- Revenue Table Card -->
        <div class="card">
            <div class="card-header">Lançamentos de Receita</div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover table-sm">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Categoria</th>
                                <th>Descrição</th>
                                <th>DT a Receber</th>
                                <th>R$ a Receber</th>
                                <th>DT do Recebimento</th>
                                <th>R$ do Recebimento</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="lancamento : ${lancamentosReceita?.content}">
                                <td th:text="${lancamento.id}"></td>
                                <td th:text="${lancamento.categoriasReceita?.descricao}"></td>
                                <td th:text="${lancamento.descricao}"></td>
                                <td th:text="${#temporals.format(lancamento.dataAReceber, 'dd/MM/yyyy')}"></td>
                                <td th:text="${#numbers.formatCurrency(lancamento.valorAReceber)}"></td>
                                <td th:text="${#temporals.format(lancamento.dataRecebimento, 'dd/MM/yyyy')}"></td>
                                <td th:text="${#numbers.formatCurrency(lancamento.valorRecebido)}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item" th:classappend="${lancamentosReceita?.first} ? 'disabled' : ''">
                            <a class="page-link" th:attr="hx-get=@{/home/lists(mesAno=${mesAnoAtual}, despesasPage=${lancamentosDespesa.number}, receitasPage=${lancamentosReceita.number - 1})}" hx-target="#lists-wrapper" hx-swap="innerHTML">Anterior</a>
                        </li>
                        <li class="page-item" th:each="i : ${lancamentosReceita?.totalPages > 0 ? #numbers.sequence(0, lancamentosReceita.totalPages - 1) : {}}" th:classappend="${i == lancamentosReceita.number} ? 'active' : ''">
                            <a class="page-link" th:attr="hx-get=@{/home/lists(mesAno=${mesAnoAtual}, despesasPage=${lancamentosDespesa.number}, receitasPage=${i})}" hx-target="#lists-wrapper" hx-swap="innerHTML" th:text="${i + 1}"></a>
                        </li>
                        <li class="page-item" th:classappend="${lancamentosReceita?.last} ? 'disabled' : ''">
                            <a class="page-link" th:attr="hx-get=@{/home/lists(mesAno=${mesAnoAtual}, despesasPage=${lancamentosDespesa.number}, receitasPage=${lancamentosReceita.number + 1})}" hx-target="#lists-wrapper" hx-swap="innerHTML">Próximo</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</body>
</html>
